<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>موقع منتجاتي ومشاريعي</title>
    <script src="https://kit.fontawesome.com/a076d05399.js" crossorigin="anonymous"></script>
    <style>
        .dil {
            position: absolute;
            top: 20px;
            width: 100%;
            text-align: center;
            z-index: 5;
            animation: slideIn 2s ease-in-out;
        }
        .dil h1 {
            font-size: 3rem;
            font-weight: bold;
            color: #ffffff;
            text-shadow: 2px 2px 6px #413e74;
            animation: glow 2s infinite alternate;
        }
        @keyframes glow {
            from { text-shadow: 2px 2px 6px #000, 0 0 10px #00f, 0 0 20px #00f; }
            to { text-shadow: 2px 2px 6px #000, 0 0 20px #0ff, 0 0 30px #0ff; }
        }
        @keyframes slideIn {
            from { transform: translateY(-100%); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            margin: 0;
            padding: 0;
            background-color: #3a0874;
            color: #273d67;
            text-align: center;
            background-image: url('https://drive.google.com/uc?export=view&id=1IDZkFHDN3ua8gALnx2nj_gvRxYmAkmkY');
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            cursor: url('https://cur.cursors-4u.net/nature/nat-3/nat258.cur'), auto;
        }
        header {
            background-color: #2f3651;
            color: white;
            padding: 1.5em 0;
            box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.2);
            position: relative;
            top: 0;
            z-index: 1000;
            background: linear-gradient(to bottom, #394070 80%, #000000 100%);
        }
        header h1 {
            margin: 0;
            font-size: 2.5em;
        }
        nav ul {
            list-style: none;
            display: flex;
            gap: 30px;
            padding: 0;
            justify-content: center;
        }
        nav ul li a {
            display: block;
            padding: 10px 20px;
            border-radius: 10px;
            font-weight: bold;
            text-decoration: none;
            color: white;
            box-shadow: 0 4px 10px rgba(0,0,0,0.3);
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        nav ul li:nth-child(1) a {
            background: linear-gradient(135deg, #a2a8b3, #2a5298);
        }
        nav ul li:nth-child(2) a {
            background: linear-gradient(135deg, #a2a8b3, #38ef7d);
        }
        nav ul li:nth-child(3) a {
            background: linear-gradient(135deg, #a2a8b3, #ff4b2b);
        }
        nav ul li:nth-child(4) a {
            background: linear-gradient(135deg, #a2a8b3, #ffd200);
        }
        nav ul li a:hover {
            transform: translateY(-3px);
            box-shadow: 0 6px 15px rgba(0,0,0,0.4);
        }
        .profile-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #4CAF50;
            border: none;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1100;
        }
        .profile-btn img {
            width: 24px;
            height: 24px;
        }
        .dropdown {
            display: none;
            position: absolute;
            top: 50px;
            right: 0;
            background-color: white;
            border: 1px solid #ccc;
            border-radius: 4px;
            box-shadow: 0 2px 5px rgba(0,0,0,0.2);
            min-width: 120px;
            z-index: 1100;
        }
        .dropdown a {
            display: block;
            padding: 10px;
            text-decoration: none;
            color: #333;
        }
        .dropdown a:hover {
            background-color: #f0f0f0;
        }
        .section-3d {
            padding: 40px 20px;
            background: linear-gradient(145deg, #E0E5EC, #ffffff);
            margin: 20px auto;
            width: 80%;
            max-width: 1200px;
            border-radius: 15px;
            box-shadow: 20px 20px 60px #c9cccf, -20px -20px 60px #ffffff;
        }
        #banner {
            padding: 30px;
            background: linear-gradient(145deg, #005703, #005a03);
            color: white;
            border-radius: 15px;
            box-shadow: 10px 10px 20px #3a8c44, -10px -10px 20px #004103;
        }
        #product-icons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 20px;
            padding: 20px;
        }
        .icon {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.1);
            padding: 20px;
            text-align: center;
            transition: transform 0.3s ease;
        }
        .icon img {
            max-width: 100%;
            height: auto;
            border-radius: 10px;
        }
        .icon h3 {
            font-size: 1.5em;
            margin: 10px 0;
        }
        .icon .price {
            font-size: 1.2em;
            font-weight: bold;
            color: #1a015e;
            margin: 5px 0;
        }
        .icon .link, .icon .buy-btn {
            display: inline-block;
            margin-top: 10px;
            padding: 8px 16px;
            background-color: #33147b;
            color: white;
            text-decoration: none;
            border-radius: 5px;
            transition: background-color 0.3s ease;
        }
        .icon .buy-btn {
            background-color: #4CAF50;
        }
        .icon .link:hover, .icon .buy-btn:hover {
            background-color: #15155daf;
        }
        .icon:hover {
            transform: translateY(-5px);
        }
        .banner-container {
            display: flex;
            justify-content: space-around;
            flex-wrap: wrap;
            padding: 20px;
        }
        .banner {
            background-color: #fff;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            width: 20%;
            min-width: 150px;
            text-align: center;
            padding: 20px;
            margin: 10px;
            transition: transform 0.3s ease;
        }
        .banner:hover {
            transform: translateY(-5px);
        }
        .banner img {
            width: 50px;
            height: 50px;
        }
        .banner p {
            margin: 10px 0 0;
            font-size: 16px;
        }
        .banner a {
            text-decoration: none;
            color: #333;
        }
        .wallet .balance-container {
            display: flex;
            align-items: center;
            text-align: left;
            background-color: rgba(76, 175, 80, 0.2);
            padding: 10px;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        .wallet .balance-container .loader {
            margin-left: 10px;
        }
        .loader {
            transform: translateZ(1px);
        }
        .loader:after {
            content: '$';
            display: inline-block;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            text-align: center;
            line-height: 40px;
            font-size: 32px;
            font-weight: bold;
            background: #FFD700;
            color: #DAA520;
            border: 4px double;
            box-sizing: border-box;
            box-shadow: 2px 2px 2px 1px rgba(0, 0, 0, .1);
            animation: coin-flip 4s cubic-bezier(0, 0.2, 0.8, 1) infinite;
        }
        @keyframes coin-flip {
            0%, 100% {
                animation-timing-function: cubic-bezier(0.5, 0, 1, 0.5);
            }
            0% {
                transform: rotateY(0deg);
            }
            50% {
                transform: rotateY(1800deg);
                animation-timing-function: cubic-bezier(0, 0.5, 0.5, 1);
            }
            100% {
                transform: rotateY(3600deg);
            }
        }
        form {
            display: flex;
            flex-direction: column;
            gap: 10px;
            max-width: 400px;
            margin: 0 auto;
        }
        form label {
            text-align: right;
            font-weight: bold;
        }
        form input {
            padding: 10px;
            border: none;
            border-radius: 5px;
            box-shadow: inset 5px 5px 10px #c9cccf, inset -5px -5px 10px #ffffff;
        }
        form button {
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }
        form button:hover {
            background-color: #45a049;
        }
        .error, .success {
            font-size: 14px;
            text-align: center;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        .error {
            color: red;
            background-color: #ffe6e6;
        }
        .success {
            color: green;
            background-color: #e6ffe6;
        }
        #loading {
            color: #666;
            display: none;
            text-align: center;
        }
        footer {
            background-color: #4C4F56;
            color: white;
            padding: 15px 0;
            margin-top: 40px;
        }
        .search-container {
            display: flex;
            align-items: center;
            justify-content: center;
            margin-top: 20px;
        }
        .search-container input {
            padding: 10px;
            width: 300px;
            font-size: 16px;
            border-radius: 25px;
            border: 2px solid #ccc;
            outline: none;
        }
        .search-container input:focus {
            border-color: #555;
        }
        .search-container button {
            background-color: #555;
            border: none;
            border-radius: 50%;
            color: white;
            cursor: pointer;
            padding: 10px;
            margin-right: -40px;
        }
        .search-container button:hover {
            background-color: #333;
        }
        #cart {
            margin: 20px auto;
            max-width: 400px;
            text-align: right;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0px 5px 15px rgba(0, 0, 0, 0.1);
        }
        #cart ul {
            list-style: none;
            padding: 0;
            margin: 0;
        }
        #cart ul li {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        #cart ul li:last-child {
            border-bottom: none;
        }
        #cart .remove-btn {
            background-color: #ff4444;
            color: white;
            border: none;
            border-radius: 5px;
            padding: 5px 10px;
            cursor: pointer;
        }
        #cart .remove-btn:hover {
            background-color: #cc0000;
        }
        #cart-total {
            font-weight: bold;
            margin-top: 10px;
        }
        #buy-all-btn {
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            margin-top: 10px;
            display: none;
        }
        #buy-all-btn:hover {
            background-color: #45a049;
        }
        a, button {
            cursor: pointer;
            transition: cursor 0.2s ease;
        }
        a:hover, button:hover {
            cursor: url('https://cur.cursors-4u.net/cursors/cur-2/cur116.cur'), auto;
        }
        .container {
            position: relative;
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            padding: 100px 40px 40px;
            align-items: center;
            justify-items: center;
        }
        .card {
            position: relative;
            width: 250px;
            height: 150px;
            overflow: hidden;
            border-radius: 20px;
            box-shadow: 0 0 20px rgba(255, 255, 255, 0.3);
            cursor: pointer;
            transition: all 0.4s ease;
            z-index: 0;
        }
        .card:hover {
            transform: scale(1.6);
            z-index: 10;
            box-shadow: 0 0 30px rgba(255, 255, 255, 0.5);
        }
        .card video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -1;
        }
        .card-title {
            position: absolute;
            bottom: 10px;
            left: 10px;
            font-size: 1.2rem;
            color: white;
            text-shadow: 1px 1px 4px black;
        }
        .cart-icon-container {
            position: fixed;
            top: 20px;
            left: 20px;
            z-index: 1100;
        }
        @keyframes bounce {
            0%, 100% { translate: 0px 36px; }
            50% { translate: 0px 46px; }
        }
        @keyframes bounce2 {
            0%, 100% { translate: 0px 46px; }
            50% { translate: 0px 56px; }
        }
        @keyframes umbral {
            0% { stop-color: #d3a5102e; }
            50% { stop-color: rgba(211, 165, 16, 0.519); }
            100% { stop-color: #d3a5102e; }
        }
        @keyframes partciles {
            0%, 100% { translate: 0px 16px; }
            50% { translate: 0px 6px; }
        }
        #particles {
            animation: partciles 4s ease-in-out infinite;
        }
        #animatedStop {
            animation: umbral 4s infinite;
        }
        #bounce {
            animation: bounce 4s ease-in-out infinite;
            translate: 0px 36px;
        }
        #bounce2 {
            animation: bounce2 4s ease-in-out infinite;
            translate: 0px 46px;
            animation-delay: 0.5s;
        }
        .header-balance-container {
            position: fixed;
            top: 20px;
            left: 140px;
            display: flex;
            align-items: center;
            text-align: left;
            background-color: rgba(76, 175, 80, 0.2);
            padding: 10px;
            border-radius: 5px;
            z-index: 1100;
            color: white;
        }
        .header-balance-container .loader {
            margin-left: 10px;
        }
    </style>
</head>
<body>
    <div id="login-section" class="section-3d">
        <h2>تسجيل الدخول</h2>
        <form id="login-form">
            <label for="email">البريد الإلكتروني:</label>
            <input type="email" id="email" placeholder="البريد الإلكتروني" required>
            <label for="password">كلمة المرور:</label>
            <input type="password" id="password" placeholder="كلمة المرور" required>
            <button type="submit">تسجيل الدخول</button>
        </form>
        <button onclick="signInWithGoogle()">تسجيل الدخول عبر Google</button>
        <button onclick="showSignupForm()">إنشاء حساب جديد</button>
        <p id="login-error" class="error"></p>
    </div>

    <div id="signup-section" class="section-3d" style="display: none;">
        <h2>إنشاء حساب جديد</h2>
        <form id="signup-form">
            <label for="signup-email">البريد الإلكتروني:</label>
            <input type="email" id="signup-email" placeholder="البريد الإلكتروني" required>
            <label for="signup-password">كلمة المرور:</label>
            <input type="password" id="signup-password" placeholder="كلمة المرور" required>
            <button type="submit">إنشاء الحساب</button>
        </form>
        <button onclick="showLoginForm()">العودة إلى تسجيل الدخول</button>
        <p id="signup-error" class="error"></p>
    </div>

    <div id="main-content" style="display: none;">
        <header>
            <div class="dil">
                <h1>Makht</h1>
            </div>
            <h1> ـــ</h1>
            <nav>
                <ul>
                    <li><a href="#home">الرئيسية</a></li>
                    <li><a href="#products">المنتجات</a></li>
                    <li><a href="#projects">المشاريع</a></li>
                    <li><a href="#" onclick="logout()">تسجيل الخروج</a></li>
                </ul>
            </nav>
            <button class="profile-btn" onclick="toggleDropdown()">
                <img src="https://img.icons8.com/ios-filled/50/ffffff/user.png" alt="User Icon">
            </button>
            <div class="dropdown" id="dropdownMenu">
                <a href="#" onclick="logout()">تسجيل الخروج</a>
            </div>
            <div class="cart-icon-container">
                <svg width="100" height="100" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg" onclick="displayCart()">
                    <g id="particles">
                        <path d="M50 20C50 20 40 10 30 20C20 30 30 40 30 40" stroke="white" stroke-width="5"/>
                        <path d="M50 20C50 20 60 10 70 20C80 30 70 40 70 40" stroke="white" stroke-width="5"/>
                    </g>
                    <g id="bounce">
                        <rect x="20" y="30" width="60" height="40" rx="10" fill="url(#gradient)"/>
                        <rect x="25" y="35" width="50" height="30" rx="5" fill="#414141"/>
                    </g>
                    <g id="bounce2">
                        <circle cx="30" cy="50" r="5" fill="white"/>
                        <circle cx="70" cy="50" r="5" fill="white"/>
                    </g>
                    <rect x="30" y="65" width="40" height="10" rx="5" fill="url(#gradient)"/>
                    <defs>
                        <linearGradient id="gradient" x1="50" y1="30" x2="50" y2="70" gradientUnits="userSpaceOnUse">
                            <stop stop-color="#D3A510"/>
                            <stop offset="1" id="animatedStop"/>
                        </linearGradient>
                    </defs>
                </svg>
            </div>
            <div class="header-balance-container">
                <div class="loader"></div>
                <p>رصيدك: <span id="balance">0</span></p>
            </div>
        </header>

        <section id="video">
            <video width="100%" height="auto" autoplay muted loop>
                <source src="https://example.com/placeholder-video.mp4" type="video/mp4">
                Your browser does not support the video tag.
            </video>
        </section>

        <section id="home" class="section-3d">
            <div id="banner">
                <h2>أهلاً وسهلاً!</h2>
                <p>اكتشف منتجاتي ومشاريعي هنا.</p>
                <div class="search-container">
                    <input type="text" placeholder="ابحث...">
                    <button type="submit"><i class="fas fa-search"></i></button>
                </div>
            </div>
        </section>

        <section id="products" class="section-3d">
            <h2>منتجاتي</h2>
            <p id="purchase-message" class="success"></p>
            <div id="product-icons">
                <div class="icon" data-price="5" data-account="crunchyroll_account@example.com">
                    <img src="https://store-images.s-microsoft.com/image/apps.33776.9007199266244356.f3c45420-71fd-4355-9b98-549eebf9b29c.3fc6451a-bdbe-4f22-b610-1a3b4289159f?h=380" alt="كرانشي رول">
                    <h3>كرانشي رول</h3>
                    <p class="price">$5</p>
                    <button onclick="addToCart('كرانشي رول', 5, 'crunchyroll_account@example.com')" class="link">إضافة إلى العربة</button>
                    <button onclick="buyProduct('كرانشي رول', 5, 'crunchyroll_account@example.com')" class="buy-btn">شراء الآن</button>
                    <a href="https://discord.gg/eew73deugc" class="link">طلب</a>
                </div>
                <div class="icon" data-price="5" data-account="steam_account@example.com">
                    <img src="https://sm.pcmag.com/t/pcmag_uk/review/s/steam/steam_nz5q.3840.jpg" alt="ستيم">
                    <h3>ستيم</h3>
                    <p class="price">$5</p>
                    <button onclick="addToCart('ستيم', 5, 'steam_account@example.com')" class="link">إضافة إلى العربة</button>
                    <button onclick="buyProduct('ستيم', 5, 'steam_account@example.com')" class="buy-btn">شراء الآن</button>
                    <a href="https://discord.gg/eew73deugc" class="link">طلب</a>
                </div>
                <div class="icon" data-price="5" data-account="package_design@example.com">
                    <img src="https://via.placeholder.com/150" alt="تصميم بكج">
                    <h3>تصميم بكج</h3>
                    <p class="price">$5</p>
                    <button onclick="addToCart('تصميم بكج', 5, 'package_design@example.com')" class="link">إضافة إلى العربة</button>
                    <button onclick="buyProduct('تصميم بكج', 5, 'package_design@example.com')" class="buy-btn">شراء الآن</button>
                    <a href="https://discord.gg/eew73deugc" class="link">طلب</a>
                </div>
                <div class="icon" data-price="5" data-account="disneyplus_account@example.com">
                    <img src="https://sm.pcmag.com/t/pcmag_me/review/d/disney/disney_dnh9.3840.jpg" alt="Disney+">
                    <h3>Disney+</h3>
                    <p class="price">$5</p>
                    <button onclick="addToCart('Disney+', 5, 'disneyplus_account@example.com')" class="link">إضافة إلى العربة</button>
                    <button onclick="buyProduct('Disney+', 5, 'disneyplus_account@example.com')" class="buy-btn">شراء الآن</button>
                    <a href="https://discord.gg/eew73deugc" class="link">طلب</a>
                </div>
                <div class="icon" data-price="5" data-account="discord_account@example.com">
                    <img src="https://pics.craiyon.com/2023-06-06/ede74f815d6849edb266b8f208f8a71d.webp" alt="حساب Discord">
                    <h3>حساب Discord</h3>
                    <p class="price">$5</p>
                    <button onclick="addToCart('حساب Discord', 5, 'discord_account@example.com')" class="link">إضافة إلى العربة</button>
                    <button onclick="buyProduct('حساب Discord', 5, 'discord_account@example.com')" class="buy-btn">شراء الآن</button>
                    <a href="https://discord.gg/eew73deugc" class="link">طلب</a>
                </div>
                <div class="icon" data-price="5" data-account="discord_credit@example.com">
                    <img src="https://www.logo.wine/a/logo/Discord/Discord-Nitro-Logo-Color.png" alt="كريدت Discord">
                    <h3>كريدت Discord</h3>
                    <p class="price">$5</p>
                    <button onclick="addToCart('كريدت Discord', 5, 'discord_credit@example.com')" class="link">إضافة إلى العربة</button>
                    <button onclick="buyProduct('كريدت Discord', 5, 'discord_credit@example.com')" class="buy-btn">شراء الآن</button>
                    <a href="https://discord.gg/eew73deugc" class="link">طلب</a>
                </div>
                <div class="icon" data-price="5" data-account="epic_account@example.com">
                    <img src="https://images.alphacoders.com/114/1148319.jpg" alt="حساب Epic">
                    <h3>حساب Epic</h3>
                    <p class="price">$5</p>
                    <button onclick="addToCart('حساب Epic', 5, 'epic_account@example.com')" class="link">إضافة إلى العربة</button>
                    <button onclick="buyProduct('حساب Epic', 5, 'epic_account@example.com')" class="buy-btn">شراء الآن</button>
                    <a href="https://discord.gg/eew73deugc" class="link">طلب</a>
                </div>
                <div class="icon" data-price="5" data-account="steam_account_2@example.com">
                    <img src="https://static0.gamerantimages.com/wordpress/wp-content/uploads/2022/01/gta-5.jpg" alt="حساب Steam إضافي">
                    <h3>حساب Steam إضافي</h3>
                    <p class="price">$5</p>
                    <button onclick="addToCart('حساب Steam إضافي', 5, 'steam_account_2@example.com')" class="link">إضافة إلى العربة</button>
                    <button onclick="buyProduct('حساب Steam إضافي', 5, 'steam_account_2@example.com')" class="buy-btn">شراء الآن</button>
                    <a href="https://discord.gg/eew73deugc" class="link">طلب</a>
                </div>
            </div>
            <div id="cart">
                <h3>عربة التسوق</h3>
                <ul id="cart-items"></ul>
                <p id="cart-total"></p>
                <button id="buy-all-btn" onclick="buyAllCart()">شراء الكل</button>
            </div>
        </section>

        <section id="projects" class="section-3d">
            <div class="container">
                <a href="/minecraft" class="card">
                    <video autoplay loop muted>
                        <source src="https://i.imgur.com/GKBKwo3.mp4" type="video/mp4" />
                    </video>
                    <div class="card-title">Minecraft</div>
                </a>
                <a href="/roblox" class="card">
                    <video autoplay loop muted>
                        <source src="https://i.imgur.com/QYW2u1m.mp4" type="video/mp4" />
                    </video>
                    <div class="card-title">Roblox</div>
                </a>
                <a href="/genshin" class="card">
                    <video autoplay loop muted>
                        <source src="https://i.imgur.com/noFaCkv.mp4" type="video/mp4" />
                    </video>
                    <div class="card-title">Genshin Impact</div>
                </a>
                <a href="/rocketleague" class="card">
                    <video autoplay loop muted>
                        <source src="https://i.imgur.com/5RiPkGw.mp4" type="video/mp4" />
                    </video>
                    <div class="card-title">Rocket League</div>
                </a>
            </div>
        </section>

        <section id="contact" class="section-3d">
            <h3>للتواصل معي</h3>
            <div class="banner-container">
                <div class="banner">
                    <a href="mailto:bachirghlis@gmail.com" target="_blank">
                        <img src="https://th.bing.com/th/id/OIP.GPb0ZcxnKxbRAXHa3xNw3QHaHa?rs=1&pid=ImgDetMain" alt="Email">
                        <p>Email: bachirghlis@gmail.com</p>
                    </a>
                </div>
                <div class="banner">
                    <a href="https://wa.me/+213658037881" target="_blank">
                        <img src="https://th.bing.com/th/id/OIP.uZbyFWEhjxQikFzaNKAxjwHaHa?rs=1&pid=ImgDetMain" alt="WhatsApp">
                        <p>WhatsApp: +213658037881</p>
                    </a>
                </div>
                <div class="banner">
                    <a href="https://www.instagram.com/ghlis_bachir" target="_blank">
                        <img src="https://static.wikia.nocookie.net/instaglobal/images/2/28/Instagram_logo.png/revision/latest/scale-to-width-down/1000?cb=20160521102112" alt="Instagram">
                        <p>Instagram: ghlis_bachir</p>
                    </a>
                </div>
                <div class="banner">
                    <a href="https://x.com/theking11521748" target="_blank">
                        <img src="https://th.bing.com/th/id/OIP.OiRP0Wt_nlImTXz5w45aRQHaHa?rs=1&pid=ImgDetMain" alt="Twitter">
                        <p>Twitter: @theking11521748</p>
                    </a>
                </div>
            </div>
        </section>

        <footer>
            <p>جميع الحقوق محفوظة &copy; 2025</p>
        </footer>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
        import {
            getAuth,
            signOut,
            onAuthStateChanged,
            GoogleAuthProvider,
            signInWithPopup,
            signInWithEmailAndPassword,
            createUserWithEmailAndPassword
        } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
        import {
            getFirestore,
            doc,
            getDoc,
            setDoc,
            updateDoc,
            collection,
            addDoc
        } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDfutRBxETZ1Nc08bSv4yUXrfD-1iJG5Ck",
            authDomain: "makht-a42f9.firebaseapp.com",
            databaseURL: "https://makht-a42f9-default-rtdb.firebaseio.com",
            projectId: "makht-a42f9",
            storageBucket: "makht-a42f9.firebasestorage.app",
            messagingSenderId: "280418327939",
            appId: "1:280418327939:web:7a7d6cae8ece38bd4eeab6",
            measurementId: "G-QTQ2Y5GF1C"
        };

        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);

        // Check authentication state
        onAuthStateChanged(auth, async (user) => {
            const loginSection = document.getElementById('login-section');
            const signupSection = document.getElementById('signup-section');
            const mainContent = document.getElementById('main-content');
            if (user) {
                loginSection.style.display = 'none';
                signupSection.style.display = 'none';
                mainContent.style.display = 'block';
                const walletRef = doc(db, "wallets", user.uid);
                const walletSnap = await getDoc(walletRef);
                if (walletSnap.exists()) {
                    document.getElementById("balance").textContent = walletSnap.data().balance.toFixed(2);
                } else {
                    await setDoc(walletRef, { balance: 0 });
                    document.getElementById("balance").textContent = "0.00";
                }
            } else {
                loginSection.style.display = 'block';
                signupSection.style.display = 'none';
                mainContent.style.display = 'none';
            }
        });

        // Email/Password Login
        document.getElementById('login-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            try {
                await signInWithEmailAndPassword(auth, email, password);
            } catch (error) {
                document.getElementById('login-error').textContent = getErrorMessage(error.code);
            }
        });

        // Email/Password Signup
        document.getElementById('signup-form').addEventListener('submit', async (e) => {
            e.preventDefault();
            const email = document.getElementById('signup-email').value;
            const password = document.getElementById('signup-password').value;
            try {
                await createUserWithEmailAndPassword(auth, email, password);
            } catch (error) {
                document.getElementById('signup-error').textContent = getErrorMessage(error.code);
            }
        });

        // Google Login
        window.signInWithGoogle = async function () {
            const provider = new GoogleAuthProvider();
            try {
                await signInWithPopup(auth, provider);
            } catch (error) {
                document.getElementById('login-error').textContent = getErrorMessage(error.code);
            }
        };

        // Show Signup Form
        window.showSignupForm = function () {
            document.getElementById('login-section').style.display = 'none';
            document.getElementById('signup-section').style.display = 'block';
        };

        // Show Login Form
        window.showLoginForm = function () {
            document.getElementById('signup-section').style.display = 'none';
            document.getElementById('login-section').style.display = 'block';
        };

        // Error Message Handler
        function getErrorMessage(errorCode) {
            switch (errorCode) {
                case 'auth/email-already-in-use':
                    return 'البريد الإلكتروني مستخدم بالفعل.';
                case 'auth/invalid-email':
                    return 'البريد الإلكتروني غير صالح.';
                case 'auth/wrong-password':
                    return 'كلمة المرور غير صحيحة.';
                case 'auth/user-not-found':
                    return 'المستخدم غير موجود.';
                case 'auth/weak-password':
                    return 'كلمة المرور ضعيفة جدًا، يجب أن تكون 6 أحرف على الأقل.';
                default:
                    return 'حدث خطأ: ' + errorCode;
            }
        }

        // Cart Functionality
        let cart = [];
        window.addToCart = function (productName, price, account) {
            cart.push({ name: productName, price: price, account: account });
            const purchaseMessage = document.getElementById('purchase-message');
            purchaseMessage.className = 'success';
            purchaseMessage.textContent = `تم إضافة ${productName} إلى العربة بنجاح!`;
            setTimeout(() => {
                purchaseMessage.textContent = '';
            }, 3000);
            displayCart();
        };

        window.removeFromCart = function (index) {
            const purchaseMessage = document.getElementById('purchase-message');
            const removedItem = cart.splice(index, 1)[0];
            purchaseMessage.className = 'success';
            purchaseMessage.textContent = `تم إزالة ${removedItem.name} من العربة.`;
            setTimeout(() => {
                purchaseMessage.textContent = '';
            }, 3000);
            displayCart();
        };

        window.displayCart = function () {
            const cartDiv = document.getElementById('cart');
            const cartItems = document.getElementById('cart-items');
            const cartTotalDiv = document.getElementById('cart-total');
            const buyAllBtn = document.getElementById('buy-all-btn');
            cartItems.innerHTML = '';
            if (cart.length === 0) {
                cartItems.innerHTML = '<li>عربة التسوق فارغة</li>';
                cartTotalDiv.innerHTML = '';
                buyAllBtn.style.display = 'none';
            } else {
                let total = 0;
                cart.forEach((item, index) => {
                    const li = document.createElement('li');
                    li.innerHTML = `
                        ${item.name} - $${item.price.toFixed(2)}
                        <button class="remove-btn" onclick="removeFromCart(${index})">إزالة</button>
                    `;
                    cartItems.appendChild(li);
                    total += item.price;
                });
                cartTotalDiv.innerHTML = `الإجمالي: $${total.toFixed(2)}`;
                buyAllBtn.style.display = 'block';
            }
        };

        // Buy Single Product
        window.buyProduct = async function (productName, price, account) {
            const user = auth.currentUser;
            const purchaseMessage = document.getElementById('purchase-message');
            if (!user) {
                purchaseMessage.className = 'error';
                purchaseMessage.textContent = 'يرجى تسجيل الدخول لإتمام الشراء.';
                return;
            }

            const walletRef = doc(db, "wallets", user.uid);
            const walletSnap = await getDoc(walletRef);
            if (!walletSnap.exists()) {
                purchaseMessage.className = 'error';
                purchaseMessage.textContent = 'لا يوجد رصيد متاح. يرجى إضافة رصيد.';
                return;
            }

            const currentBalance = walletSnap.data().balance;
            if (currentBalance < price) {
                purchaseMessage.className = 'error';
                purchaseMessage.textContent = 'رصيدك غير كافٍ لإتمام الشراء.';
                return;
            }

            try {
                // Deduct balance
                await updateDoc(walletRef, {
                    balance: currentBalance - price
                });

                // Record purchase
                await addDoc(collection(db, "purchases"), {
                    userId: user.uid,
                    productName: productName,
                    price: price,
                    account: account,
                    timestamp: new Date()
                });

                // Update balance display
                document.getElementById("balance").textContent = (currentBalance - price).toFixed(2);

                // Send email
                await fetch('https://us-central1-makht-a42f9.cloudfunctions.net/sendPurchaseEmail', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        email: user.email,
                        productName: productName,
                        account: account,
                        price: price
                    })
                });

                purchaseMessage.className = 'success';
                purchaseMessage.textContent = `تم شراء ${productName} بنجاح! تم إرسال تفاصيل الحساب إلى بريدك الإلكتروني.`;
            } catch (error) {
                purchaseMessage.className = 'error';
                purchaseMessage.textContent = 'حدث خطأ أثناء الشراء: ' + error.message;
            }
        };

        // Buy All Cart Items
        window.buyAllCart = async function () {
            const user = auth.currentUser;
            const purchaseMessage = document.getElementById('purchase-message');
            if (!user) {
                purchaseMessage.className = 'error';
                purchaseMessage.textContent = 'يرجى تسجيل الدخول لإتمام الشراء.';
                return;
            }

            if (cart.length === 0) {
                purchaseMessage.className = 'error';
                purchaseMessage.textContent = 'عربة التسوق فارغة.';
                return;
            }

            const totalPrice = cart.reduce((sum, item) => sum + item.price, 0);
            const walletRef = doc(db, "wallets", user.uid);
            const walletSnap = await getDoc(walletRef);
            if (!walletSnap.exists()) {
                purchaseMessage.className = 'error';
                purchaseMessage.textContent = 'لا يوجد رصيد متاح. يرجى إضافة رصيد.';
                return;
            }

            const currentBalance = walletSnap.data().balance;
            if (currentBalance < totalPrice) {
                purchaseMessage.className = 'error';
                purchaseMessage.textContent = 'رصيدك غير كافٍ لإتمام الشراء.';
                return;
            }

            try {
                // Deduct balance
                await updateDoc(walletRef, {
                    balance: currentBalance - totalPrice
                });

                // Record purchases
                for (const item of cart) {
                    await addDoc(collection(db, "purchases"), {
                        userId: user.uid,
                        productName: item.name,
                        price: item.price,
                        account: item.account,
                        timestamp: new Date()
                    });
                }

                // Update balance display
                document.getElementById("balance").textContent = (currentBalance - totalPrice).toFixed(2);

                // Send email with all purchased items
                await fetch('https://us-central1-makht-a42f9.cloudfunctions.net/sendPurchaseEmail', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        email: user.email,
                        items: cart.map(item => ({
                            productName: item.name,
                            account: item.account,
                            price: item.price
                        })),
                        totalPrice: totalPrice
                    })
                });

                // Clear cart
                cart = [];
                displayCart();

                purchaseMessage.className = 'success';
                purchaseMessage.textContent = 'تم شراء جميع المنتجات بنجاح! تم إرسال تفاصيل الحسابات إلى بريدك الإلكتروني.';
            } catch (error) {
                purchaseMessage.className = 'error';
                purchaseMessage.textContent = 'حدث خطأ أثناء الشراء: ' + error.message;
            }
        };

        window.toggleDropdown = function () {
            const dropdown = document.getElementById("dropdownMenu");
            dropdown.style.display = dropdown.style.display === "block" ? "none" : "block";
        };

        window.logout = async function () {
            try {
                await signOut(auth);
            } catch (error) {
                alert("خطأ في تسجيل الخروج: " + getErrorMessage(error.code));
            }
        };
    </script>
</body>
</html>
